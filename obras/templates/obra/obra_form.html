{% extends 'obra/base.html' %}

{% block content %}
<div class="container my-5">
    <h1 class="h3">{{ object.pk|yesno:"Editar Obra,Nova Obra" }}</h1>
    <form method="post">
        {% csrf_token %}
        <div class="mb-3">
            <label for="id_nome" class="form-label">Nome</label>
            <input type="text" name="nome" id="id_nome" class="form-control" value="{{ object.nome }}" required>
        </div>

        <div class="mb-3">
            <label for="id_descricao" class="form-label">Descrição</label>
            <textarea name="descricao" id="id_descricao" class="form-control" required>{{ object.descricao }}</textarea>
        </div>

        <div class="mb-3">
            <label for="id_endereco" class="form-label">Endereço</label>
            <input type="text" name="endereco" id="id_endereco" class="form-control" value="{{ object.endereco }}" required>
        </div>

        <div class="mb-3">
            <label for="id_data_inicio" class="form-label">Data de Início</label>
            <input type="date" name="data_inicio" id="id_data_inicio" class="form-control" value="{{ object.data_inicio }}" required>
        </div>

        <div class="mb-3">
            <label for="id_dt_prev_fim" class="form-label">Previsão de Fim</label>
            <input type="date" name="dt_prev_fim" id="id_dt_prev_fim" class="form-control" value="{{ object.dt_prev_fim }}" required>
        </div>

        <div class="mb-3">
            <label for="id_gerente" class="form-label">Gerente</label>
            <input type="text" name="gerente" id="id_gerente" class="form-control" value="{{ object.gerente }}" required>
        </div>

        <div class="mb-3">
            <label for="id_mestres" class="form-label">Mestres</label>
            <select multiple name="mestres" id="id_mestres" class="form-control">
                {% for mestre in mestres %}
                    <option value="{{ mestre.id }}" {% if mestre in object.mestres.all %}selected{% endif %}>{{ mestre }}</option>
                {% endfor %}
            </select>
        </div>

        <button type="submit" class="btn btn-primary">Salvar</button>
        <a href="{% url 'obra-list' %}" class="btn btn-secondary">Cancelar</a>
    </form>
</div>
{% endblock %}
